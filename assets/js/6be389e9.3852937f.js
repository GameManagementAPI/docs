"use strict";(globalThis.webpackChunkgma_docs=globalThis.webpackChunkgma_docs||[]).push([[2828],{6384(e,n,a){a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>g,default:()=>c,frontMatter:()=>s,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"gamemanagementapi/languages","title":"Multi-Laguage support","description":"The Language class provides a centralized translation system for the GameManagementAPI. It allows for supporting multiple languages, with dynamic language loading, per-player preferences, and plugin-specific language extensions.","source":"@site/docs/gamemanagementapi/languages.md","sourceDirName":"gamemanagementapi","slug":"/gamemanagementapi/languages","permalink":"/docs/docs/gamemanagementapi/languages","draft":false,"unlisted":false,"editUrl":"https://github.com/GameManagementAPI/docs/tree/main/docs/gamemanagementapi/languages.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"World management","permalink":"/docs/docs/gamemanagementapi/games/world-management"},"next":{"title":"Events","permalink":"/docs/docs/gamemanagementapi/events"}}');var t=a(4848),i=a(8453);const s={sidebar_position:4},g="Multi-Laguage support",r={},o=[{value:"Overview",id:"overview",level:2},{value:"Loading and Managing Languages",id:"loading-and-managing-languages",level:2},{value:"Listing available languages",id:"listing-available-languages",level:3},{value:"Loading a language by name",id:"loading-a-language-by-name",level:3},{value:"Default fallback language",id:"default-fallback-language",level:3},{value:"Player Language Preferences",id:"player-language-preferences",level:2},{value:"Getting a players language preference",id:"getting-a-players-language-preference",level:3},{value:"Setting player language preferences",id:"setting-player-language-preferences",level:3},{value:"Getting Translations",id:"getting-translations",level:2},{value:"Get a plain text translation",id:"get-a-plain-text-translation",level:3},{value:"Get a styled text translation as a text component",id:"get-a-styled-text-translation-as-a-text-component",level:3},{value:"Arguments",id:"arguments",level:3},{value:"Providing language extensions for plugins",id:"providing-language-extensions-for-plugins",level:2},{value:"Accessing extensions",id:"accessing-extensions",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"multi-laguage-support",children:"Multi-Laguage support"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Language"})," class provides a centralized translation system for the GameManagementAPI. It allows for supporting multiple languages, with dynamic language loading, per-player preferences, and plugin-specific language extensions."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"All text sent to players should use Language.get or Language.getCmp for proper translation and styling."})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The language system exists to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Provide translations for core messages and gameplay."}),"\n",(0,t.jsx)(n.li,{children:"Persist player-specific language preferences."}),"\n",(0,t.jsx)(n.li,{children:"Allow plugins to add their own language extensions."}),"\n",(0,t.jsx)(n.li,{children:"Support argument substitution and cross-key references."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"loading-and-managing-languages",children:"Loading and Managing Languages"}),"\n",(0,t.jsx)(n.h3,{id:"listing-available-languages",children:"Listing available languages"}),"\n",(0,t.jsx)(n.p,{children:"The Language object provides a list of all available languages gma recognizes."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:"val langs = Language.availableLanguages\n"})}),"\n",(0,t.jsx)(n.h3,{id:"loading-a-language-by-name",children:"Loading a language by name"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Returns the Language object for the requested name."}),"\n",(0,t.jsx)(n.li,{children:"Falls back to null if the file does not exist."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:'val french = Language.get("french")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"default-fallback-language",children:"Default fallback language"}),"\n",(0,t.jsx)(n.p,{children:"The default fallback language used when a player has no preference or the translation file is missing can be accessed like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:"val fallback = Language.default\n"})}),"\n",(0,t.jsx)(n.h2,{id:"player-language-preferences",children:"Player Language Preferences"}),"\n",(0,t.jsx)(n.h3,{id:"getting-a-players-language-preference",children:"Getting a players language preference"}),"\n",(0,t.jsx)(n.p,{children:"Language provides a static method for retrieving the players prefered language from db:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:"val langName = Language.getPlayerLanguage(player)\n"})}),"\n",(0,t.jsx)(n.p,{children:"But it is reccommended to use"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:"val language = player.gma.language\n"})}),"\n",(0,t.jsx)(n.p,{children:"or"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:"val language = commandSender.language\n"})}),"\n",(0,t.jsx)(n.h3,{id:"setting-player-language-preferences",children:"Setting player language preferences"}),"\n",(0,t.jsx)(n.p,{children:"Player language preferences are usually set via the GamePlayer instance:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:'player.gma.language = Language.get("english")\n'})}),"\n",(0,t.jsx)(n.h2,{id:"getting-translations",children:"Getting Translations"}),"\n",(0,t.jsx)(n.h3,{id:"get-a-plain-text-translation",children:"Get a plain text translation"}),"\n",(0,t.jsx)(n.p,{children:"To simply retrieve the translation value of a translation key:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:'val msg = language.get("game.starting")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"get-a-styled-text-translation-as-a-text-component",children:"Get a styled text translation as a text component"}),"\n",(0,t.jsx)(n.p,{children:"This function uses MiniMessage for directly parsing the translation into a component:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:'val component = language.getCmp("game.starting")\nplayer.sendMessage(component)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,t.jsx)(n.p,{children:"Both functions support passing custom arguments to the translations:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:'val msg = language.get("game.starting", arg1, arg2, arg3, ...)\n'})}),"\n",(0,t.jsx)(n.p,{children:"or"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:'val component = language.getCmp("game.starting", arg1, arg2, arg3, ...)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"providing-language-extensions-for-plugins",children:"Providing language extensions for plugins"}),"\n",(0,t.jsxs)(n.p,{children:["You can just use the GMA language implementation instead of implementing one for your plugin.\nThis is done by so called language ",(0,t.jsx)(n.code,{children:"extensions"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"You can load these extensions when your plugin starts by executing the following method:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:'Language.provideLanguageExtension(\n    namespace = "MyPlugin",\n    language = "english",\n    languageFileContent = """\n        myplugin.greet: "Hello, $0!"\n        myplugin.farewell: "Goodbye, $0!"\n        ...\n    """.trimIndent()\n)\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Please load the languageFileContent from disk and don't store it as a string in your project..."})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"accessing-extensions",children:"Accessing extensions"}),"\n",(0,t.jsxs)(n.p,{children:["These language extensions can then be accessed by using the ",(0,t.jsx)(n.code,{children:".child"})," method of a language:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:'title="example"',children:'val pluginLang = language.child("MyPlugin")\nval greeting = pluginLang.get("myplugin.greet", player.name)\n'})})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,a){a.d(n,{R:()=>s,x:()=>g});var l=a(6540);const t={},i=l.createContext(t);function s(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function g(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);